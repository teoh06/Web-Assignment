<link rel="stylesheet" href="~/css/LoginIndex.css" />

@if(User.Identity.IsAuthenticated)
{
	string userRole = "User"; 

    if (User.IsInRole("Admin"))
    {
        userRole = "Admin";
    }
    else if (User.IsInRole("Member"))
    {
        userRole = "Member";
    }
    else if (User.IsInRole("Staff"))
    {
        userRole = "Staff";
    }

    <div class="text-center">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">Welcome, @User.Identity.Name! (@userRole)</h1>
        <p class="lead text-gray-600 mb-8">
            You are logged in as a ** @userRole **. Here are your available options:
        </p>

        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h2>Reports</h2>
                <p>View your past reports and generate new ones.</p>
                <a href="@Url.Action("ReportHistory", "Home")" class="btn btn-blue">
                    View Report History
                </a>
            </div>

            @* Conditional card for Admin role *@
            @if (User.IsInRole("Admin"))
            {
                <div class="dashboard-card">
                    <h2>Admin Panel</h2>
                    <p>Access administrative tools and manage users and data.</p>
                    <a href="@Url.Action("AdminDashboard", "Admin")" class="btn btn-red">
                        Go to Admin Panel
                    </a>
                </div>
            }

            @* Conditional card for Member role (example) *@
            @if (User.IsInRole("Member"))
            {
                <div class="dashboard-card">
                    <h2>Submit Report</h2>
                    <p>Submit a new report for review.</p>
                    <a href="@Url.Action("Report", "Home")" class="btn btn-green">
                        @* Changed to Home/Report based on HomeController *@
                        New Report
                    </a>
                </div>
            }

            @* Conditional card for Staff role (example) *@
            @if (User.IsInRole("Staff"))
            {
                <div class="dashboard-card">
                    <h2>Manage Responses</h2>
                    <p>View and respond to submitted reports.</p>
                    <a href="@Url.Action("ManageResponses", "Response")" class="btn btn-yellow">
                        Manage Responses
                    </a>
                </div>
            }

            <div class="dashboard-card">
                <h2>Settings</h2>
                <p>Manage your account settings and preferences.</p>
                <a href="#" class="btn btn-green">
                    Go to Settings
                </a>
            </div>

            <div class="dashboard-card">
                <h2>Help</h2>
                <p>Find answers to common questions and get support.</p>
                <a href="#" class="btn btn-yellow">
                    Get Help
                </a>
            </div>
        </div>
    </div>
}
else
{
    // Content for unauthenticated users (your original welcome/login prompt)
    <div class="text-center login-prompt">
        <h1 class="display-4">Welcome</h1>
        <p class="lead">Please log in to access the report and response system.</p>
        <p>
            <a asp-area=""
               asp-controller="Account"
               asp-action="Login"
               class="btn-login">
                Login Now
            </a>
        </p>
    </div>
}